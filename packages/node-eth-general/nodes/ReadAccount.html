<!DOCTYPE html>
<script type="text/javascript">
  RED.nodes.registerType('Read-Account', {
    category: 'General nodes',
    defaults: {
      name: {value: ''},
      rpc: { value: '', type: 'rpc', required: true },
      action: { value: 'getBalance' },
      account: { value: '', required: true },
      accountType: {value: 'str', required: true}
    },
    inputs: 1,
    outputs: 1,
    icon: "font-awesome/fa-search",
    label: function () {
      return this.name || 'Read Account';
    },
    oneditprepare: function () {
        $("#node-input-account").typedInput({
            default: 'str',
            types: ["str", "msg", "flow", "global"],
            typeField: $("#node-input-accountType")
        })
    },
  });
</script>

<script type="text/html" data-template-name="Read-Account">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name">
  </div>
  <div class="form-row">
    <label for="node-input-rpc">Provider</label>
    <input type="text" id="node-input-rpc">
  </div>
  <div class="form-row">
    <label for="node-input-account">Account</label>
    <input type="text" id="node-input-account" style="width: 70%;" placeholder="Account Address">
    <input type="hidden" id="node-input-accountType">
  </div>
  <div class="form-row">
    <label for="node-input-action">Action</label>
    <select id="node-input-action">
      <option value="getBalance">Get Balance</option>
      <option value="getTransactionCount">Get Transaction Count</option>
    </select>
  </div>
</script>

<script type="text/html" data-help-name="Read-Account">
  <p>
    The Read Account node allows users to read the current balance or the transaction count of a given Ethereum account using the ethers JsonRpcProvider from the selected RPC Configuration node.
  </p>
</script>
